## 一、三周总计划（总目标 & 分工）

### 第 1 周：架构 & 设计周（本周）

**本周硬性交付：**

1. 前端页面设计图（至少：登录、Dashboard、日志、告警、操作审计；SystemConfig 可选）。
2. 数据库表结构设计（ER 图 + 建表 SQL 初稿）。
3. 后端接口设计文档（主要是 URL、请求参数、响应字段，不要求全部实现）。
4. 基础项目骨架能跑起来（FastAPI + Vue 项目可启动，能打通一个简单测试接口）。

**按人目标：**

- 赖鑫（ 架构、整理）：
  - 定数据库表结构、接口命名规范、项目目录规范。
  - 搭好 FastAPI 基础、MySQL 连接、JWT 骨架。
  - 拉起 `docs/db-schema.md`、`docs/api-docs.md` 两个文档。
- 王成友（日志采集）：
  - 参与 DB 设计，重点是 `logs` 相关字段。
  - 写 `models/log.py`、`schemas/log.py` 雏形。
  - 和前端对齐日志查询接口需要的过滤条件。
- 于凯程（告警&统计&审计）：
  - 设计 `alerts`、`operation_log`、`system_config` 表。
  - 确定告警规则文档（写清“什么条件触发什么告警”）。
  - 设计 `/stats/...`、`/alerts/...` 接口字段列表。
- 吴昊（前端框架&日志页）：
  - 拉起 Vue 项目、Router、Layout 框架、axios 封装。
  - 跟王建普一起出整体信息架构（菜单结构、页面跳转流）。
  - 输出组件拆分设计：哪些独立成组件（筛选表单、表格、图表容器）。
- 王建普（Dashboard&告警&审计）：
  - 用工具（Figma / 墨刀 / 手绘也行但要拍照整理进文档）画出：
    - 登录页
    - Dashboard
    - 日志页
    - 告警页
    - 操作审计页
  - 补充每个页面的字段布局（列名、过滤项、按钮）。

------

### 第 2 周：核心功能开发周

**本周硬性目标：**

1. 后端：核心业务接口可用
   - 登录 / 当前用户
   - 日志：新增（POST /logs）、查询、文件上传解析（先支持 1～2 种格式）、导出
   - 告警：规则实现 + 查询 + 状态更新
   - 统计：按时间 / 按级别统计接口
   - 操作审计：登陆、上传日志、修改告警状态写操作日志
2. 前端：主要页面能“跑起来”
   - 登录页真正调用后端登录
   - Logs 页：筛选 + 请求后端 + 展示数据 + 上传文件
   - Alerts 页：列表展示 + 状态修改
   - Dashboard：至少有 1 个折线图、1 个饼图展示真实接口数据

**按人分工：**

- 赖鑫：
  - 完成 auth 模块（密码哈希、JWT、依赖注入）。
  - 写 `get_current_user` / `get_current_admin` 依赖。
  - 搭统一响应格式、异常处理。
  - Code review B/C 关键接口，保证统一风格。
- 王成友：
  - 完整实现 `logs` 模块：
    - `POST /logs`：入库
    - `GET /logs`：分页 + 过滤
    - `GET /logs/{id}`：详情
    - `GET /logs/export`：导出 CSV
  - `POST /logs/upload-file`：支持按行简单解析你们约定的日志格式。
  - 在插入日志后调用于凯程的告警检查函数。
- 于凯程：
  - 实现 `alerts` 模块：
    - ORM + API（列表、详情、修改状态）
  - 实现 `alert_engine` 两条规则：
    - 暴力破解（N 分钟内登录失败次数阈值）
    - ERROR 日志自动告警
  - 实现 `stats` 模块：
    - `/stats/logs-by-time`
    - `/stats/logs-by-level`
  - 实现 `operation_log`：
    - 公共函数 `record_operation`
    - 在登录、上传日志、修改告警状态等地方调用。
- 吴昊：
  - 实现前端框架：
    - Layout + 菜单 + 路由守卫（未登录跳转登录）。
    - axios 拦截器（自动带 token，401 处理）。
  - 实现 `Login.vue`，真联调后端登录。
  - 实现 `Logs.vue`：
    - `LogFilterForm` + `LogTable`
    - 调后端 `/logs` 接口分页展示
    - 上传文件对接 `/logs/upload-file`
    - 导出按钮打开 `/logs/export` 下载。
- 王建普：
  - 实现 `Dashboard.vue`：
    - 对接 `/stats/logs-by-time` / `/stats/logs-by-level`
    - 嵌入图表组件 `LogTrendChart`、`LevelPieChart`
  - 实现 `Alerts.vue`：
    - 告警列表 + 筛选
    - 修改状态调用 `PATCH /alerts/{id}/status`
  - 实现 `OperationLogs.vue`（表格 + 分页，简单展示）。

------

### 第 3 周：联调、优化 & 文档周

**本周硬性目标：**

1. 完成前后端联调，打通完整 demo 流程：
   - 上传一批包含错误 / 暴力破解的日志 → 告警产生 → Dashboard 有变化 → 前端可以处理告警。
2. 修 Bug、补边角：
   - 异常返回处理
   - 基础权限控制（普通用户不能改告警状态等）
3. 完成文档 & 演示材料：
   - README（启动方式、默认账号）
   - 接口文档定稿（api-docs.md）
   - 数据库说明（db-schema.md）
   - 系统架构图、模块划分图
   - 演示流程脚本（谁演哪一段）

**按人分工：**

- 赖鑫：
  - 组织联调，拉清单列“关键流程”一条条验证。
  - 统一写系统架构文档，包含模块图、调用关系。
  - 过一遍安全相关点（简单权限控制、日志保留策略）。
- 王成友：
  - 优化日志查询：加索引、优化默认排序。
  - 补 parser 边界情况（非法行、空行处理）。
  - 写一份“日志格式说明”文档，放 docs 下。
- 于凯程：
  - 调整告警阈值 / 规则，让 demo 效果看起来合理（不要一下刷一堆垃圾告警）。
  - 给告警 detail 补充更易读的信息。
  - 补充几个统计接口（如果需要更多维度）。
- 吴昊：
  - 前端整体 UI 调整：统一表格样式、按钮样式。
  - 加基础交互体验（loading、空状态、错误提示）。
  - 联调日志相关所有接口，确保无前端低级 bug。
- 王建普：
  - 图表和页面视觉微调，让 Dashboard 看起来“像个系统”。
  - 告警、操作日志页面增加必要的筛选/排序。
  - 和你一起整理“演示 PPT / 报告里的页面截图”。